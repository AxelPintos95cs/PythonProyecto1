{% extends 'blog_app/base.html' %}

{% block content %}
  <h1>{{ post.title }}</h1>
  <p>{{ post.content }}</p>
  <p><strong>Autor:</strong> {{ post.author.username }}</p>
  <div>
        <form action="{% url 'like_post' post.id %}" method="post">
            {% csrf_token %}
            <button type="submit" id="like-button">üëç</button>
        </form>
        <span>Likes: {{ like_count }}</span>  <!-- Mostrar el n√∫mero de likes -->
    </div>
    <h2>Comentarios</h2>
    {% for comment in comments %}
        <div>
            <strong>{{ comment.user.username }}</strong> dijo:
            <p>{{ comment.content }}</p>
            <small>Publicado el {{ comment.created_at }}</small>
        </div>
        <hr>
    {% empty %}
        <p>No hay comentarios a√∫n. S√© el primero en comentar.</p>
    {% endfor %}
    
    <!-- Formulario para agregar un comentario -->
    <h3>Deja tu comentario</h3>
    {% if user.is_authenticated %}
        <form method="post">
            {% csrf_token %}
            {{ comment_form.as_p }}
            <button type="submit">Enviar</button>
        </form>
    {% else %}
        <p><a href="{% url 'login' %}">Inicia sesi√≥n</a> para comentar.</p>
    {% endif %}
    
  <div class="btn-group">
    <a href="{% url 'home' %}" class="btn btn-primary">Volver a la p√°gina principal</a>
    {% if post.author == user %}
      <a href="{% url 'confirm_delete_post' post.id %}" class="btn btn-danger">Eliminar Post</a>
    {% endif %}
  </div>
  
{% endblock %}
